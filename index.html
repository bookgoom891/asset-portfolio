<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>자산 포트폴리오</title>
  <link rel="stylesheet" href="/style.css" />
  <script defer src="/main.js"></script>
</head>
<body>
  <div class="backdrop"></div>
  <header class="site-header">
    <div class="brand">
      <div class="brand-mark"></div>
      <div>
        <h1>자산 포트폴리오</h1>
        <p>섹터 목표 비중과 현재 배분을 한눈에</p>
      </div>
    </div>
    <button id="logoutBtn" class="ghost" type="button" hidden>로그아웃</button>
  </header>

  <main class="container">
    <section id="authView" class="card auth">
      <div class="auth-col">
        <h2>회원가입</h2>
        <p class="muted">아이디와 비밀번호를 먼저 만들어 주세요.</p>
        <form id="registerForm">
          <label>
            아이디
            <input type="text" id="regUsername" required minlength="3" />
          </label>
          <label>
            비밀번호
            <input type="password" id="regPassword" required minlength="6" />
          </label>
          <button type="submit" class="primary">가입하기</button>
          <p id="registerMsg" class="msg"></p>
        </form>
      </div>
      <div class="auth-col">
        <h2>로그인</h2>
        <p class="muted">로컬 저장 기반의 간편 로그인입니다.</p>
        <form id="loginForm">
          <label>
            아이디
            <input type="text" id="loginUsername" required />
          </label>
          <label>
            비밀번호
            <input type="password" id="loginPassword" required />
          </label>
          <button type="submit" class="primary">로그인</button>
          <p id="loginMsg" class="msg"></p>
        </form>
        <div class="divider"></div>
        <h3>비밀번호 재설정</h3>
        <p class="muted">아이디를 입력하고 새 비밀번호로 바꿉니다.</p>
        <form id="resetForm">
          <label>
            아이디
            <input type="text" id="resetUsername" required />
          </label>
          <label>
            새 비밀번호
            <input type="password" id="resetPassword" required minlength="6" />
          </label>
          <button type="submit" class="ghost">재설정</button>
          <p id="resetMsg" class="msg"></p>
        </form>
      </div>
    </section>

    <section id="appView" hidden>
      <div class="grid">
        <section class="card" aria-labelledby="summaryTitle">
          <div class="card-title">
            <h2 id="summaryTitle">요약</h2>
            <span id="targetSumBadge" class="badge"></span>
          </div>
          <div class="summary">
            <div>
              <span class="label">총 자산</span>
              <span id="totalAmount" class="value">-</span>
            </div>
            <div>
              <span class="label">섹터 수</span>
              <span id="sectorCount" class="value">-</span>
            </div>
            <div>
              <span class="label">자산 항목</span>
              <span id="assetCount" class="value">-</span>
            </div>
          </div>
          <div class="table-wrap">
            <table class="data-table">
              <thead>
                <tr>
                  <th>섹터</th>
                  <th>현재 금액</th>
                  <th>현재 비중</th>
                  <th>목표 비중</th>
                  <th>차이</th>
                  <th>이동 필요</th>
                </tr>
              </thead>
              <tbody id="sectorSummary"></tbody>
            </table>
          </div>
        </section>

        <section class="card" aria-labelledby="sectorTitle">
          <div class="card-title">
            <h2 id="sectorTitle">섹터 설정</h2>
            <span class="muted">목표 비중(%)을 입력하세요.</span>
          </div>
          <form id="sectorForm" class="inline-form">
            <input type="hidden" id="sectorId" />
            <input type="text" id="sectorName" placeholder="섹터 이름" required />
            <input type="number" id="sectorTarget" placeholder="목표 %" min="0" max="100" step="0.1" required />
            <button type="submit" class="primary" id="sectorSubmit">추가</button>
            <button type="button" class="ghost" id="sectorCancel" hidden>취소</button>
          </form>
          <div class="table-wrap">
            <table class="data-table">
              <thead>
                <tr>
                  <th>섹터</th>
                  <th>목표 %</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="sectorList"></tbody>
            </table>
          </div>
          <div id="sectorTargetAlert" class="sector-alert" aria-live="polite"></div>
        </section>

        <section class="card" aria-labelledby="assetTitle">
          <div class="card-title">
            <h2 id="assetTitle">자산 항목</h2>
            <span class="muted">금액은 원 단위로 입력하세요.</span>
          </div>
          <form id="assetForm" class="inline-form">
            <input type="hidden" id="assetId" />
            <input type="text" id="assetName" placeholder="항목 이름" required />
            <input type="number" id="assetAmount" placeholder="금액(원)" min="0" step="1" required />
            <select id="assetSector"></select>
            <button type="submit" class="primary" id="assetSubmit">추가</button>
            <button type="button" class="ghost" id="assetCancel" hidden>취소</button>
          </form>
          <div class="option-row">
            <label class="option-toggle">
              <input type="checkbox" id="mergeSameAsset" />
              같은 항목 추가 시 금액 더하기
            </label>
            <span class="muted">해제 시 동일 이름도 별도 항목으로 추가됩니다.</span>
          </div>
          <div class="table-wrap">
            <table class="data-table">
              <thead>
                <tr>
                  <th>항목</th>
                  <th>금액</th>
                  <th>섹터</th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="assetList"></tbody>
            </table>
          </div>
        </section>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>데이터는 이 브라우저에만 저장됩니다.</p>
  </footer>
</body>
</html>
